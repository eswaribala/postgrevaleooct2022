psql -h localhost -d postgres -U postgres -p 5432 -W
select datname,oid from pg_database where datname='postgres';
.\initdb.exe -D c:/democluster/postgresql/14/data

Change the server port in data folder config file
.\pg_ctl.exe start -D e:\PostgreSQL\14\data
Server started
psql -h localhost -d postgres  -p 5436 -W

\l list the databases
\c change the database
\dt list the tables
select version();
select current_date;
select 56+77;
\q quit the data cluster

Create table cwd_directory(id numeric(18,0) Primary Key, directory_name varchar(255), lower_directory_name varchar(255), created_date timestamptz,
updated_date timestamptz, active numeric(9,0));

\d cwd_directory -- describe the table

show timezone;
set timezone = 'America/Los_Angeles';

insert into cwd_directory (id,directory_name,lower_directory_name,created_date,updated_date,active) values(1,'LDAP', 'ldap', '2022-04-05 20:20:25-07', '2022-09-19 01:02:25-07',
2);
select current_timestamp;
update cwd_directory set created_date='2022-04-05 12:40:47.910466+05:30' where id=1;

#foreign key
create table cwd_synchronization_token(directory_id numeric(18,0) references cwd_directory(id), synch_status_token text);

insert into cwd_synchronization_token(directory_id,synch_status_token)values(1,'available');

create table cwd_user(id numeric(18,0) primary key, directory_id numeric(18,0) references cwd_directory(id), user_name varchar(255),
lower_user_name varchar(255));

alter table cwd_user add constraint unique_key unique(lower_user_name); 

create table app_user(id numeric(18,0) primary key, user_key varchar(255),
lower_user_name varchar(255) references cwd_user(lower_user_name));


alter table app_user add constraint unique_key_app_user unique(user_key); 

create type featuretype as Enum('ACTIVE','INACTIVE');

create table feature(id numeric(18,0) primary key, feature_name varchar(255), feature_type featuretype, user_key varchar(255)
references app_user(user_key));


#geometry type
CREATE EXTENSION postgis;

CREATE TABLE geometries (name varchar, geom geometry);

INSERT INTO geometries VALUES
  ('Point', 'POINT(0 0)'),
  ('Linestring', 'LINESTRING(0 0, 1 1, 2 1, 2 2)'),
  ('Polygon', 'POLYGON((0 0, 1 0, 1 1, 0 1, 0 0))'),
  ('PolygonWithHole', 'POLYGON((0 0, 10 0, 10 10, 0 10, 0 0),(1 1, 1 2, 2 2, 2 1, 1 1))'),
  ('Collection', 'GEOMETRYCOLLECTION(POINT(2 0),POLYGON((0 0, 1 0, 1 1, 0 1, 0 0)))');

SELECT name, ST_AsText(geom) FROM geometries;


